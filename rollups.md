# المجمعات (Rollups)

عادةً ما يتم تصميم حلول الطبقة الثانية كامتدادات لـ Ethereum. يمكن تصنيف معظمها تحت مظلة كونها مجمعات. خلال هذا الدرس، سوف نفهم ما هي الأنواع المختلفة من المجمعات (Rollups).

تسمى المجمعات بهذا الأسم لأنها **تجمع** معاملات متعددة في دفعة واحدة. بشكل أساسي، يقومون بنقل الحساب خارج السلسلة الرئيسية، على سبيل المثال من خلال جعل المستخدمين يتعاملون خارج السلسلة الرئيسية - عادةً على شبكة الطبقة الثانية - ثم تجميع معاملات المستخدم المتعددة في دفعة واحدة والتي يتم بعد ذلك نشرها على سلسلة إيثريوم الرئيسية في عمل واحد. بدلاً من إرسال كل معاملة بشكل منفصل، تسمح المجمعات بإرسال دفعة واحدة بشكل دوري مما يقلل التكلفة المرتبطة بفعل شيء ما في سلسلة الطبقة الأولى الرئيسية.

للتعامل مع مجموعة من الأموال، عادةً ما يقوم المستخدمون بتأمين الأموال في عقد ذكي على شبكة الطبقة الأولى، ثم يتم بعد ذلك ربط هذه الأموال وتداولها على شبكة الطبقة الثانية. وهذا يسمح بمعالجة المعاملات المستقبلية دون تحمل تكاليف تنفيذ المعاملات على السلسلة الرئيسية. عندما يرغب المستخدمون في الخروج مرة أخرى إلى الطبقة الأولى، يمكنهم إعادة ربط أصولهم وفتح الأموال من العقد الذكي للطبقة الأولى.

## أنواع المجمعات

على مستوى عالٍ، هناك نوعان من المجمعات المستخدمة بشكل رئيسي لتوسيع نطاق Ethereum. وتشمل هذه **مجمعات Optimistic** و **مجمعات ZK**.

يعتبر كل من شبكة Optimism و Arbitrum من الأمثلة على حلول مجمعات Optimistic.

بينما تعد كل من شبكة zkSync و StarkNet و Polygon Hermez أمثلة على حلول مجمعات ZK.

الاختلاف الرئيسي بين هاتين العملتين هو في طريقة تحقيق الاستقرار للمعاملات المجمعة في النهاية.

<img src="https://www.web3arabs.com/courses/layers/rollup-types.png"/>

## مجمعات Optimistic

يمكننا التعبير عن مجمعات Optimistic **بالمتفائلة** لأنها تعتبر جميع المعاملات التي تتم على الطبقة الثانية صالحة ما لم يثبت خلاف ذلك. يمكننا القول بأنها تعمل بعقلية **بريئ حتى تُثبت إدانته** بحيث انها تتفائل ان هذا الشخص ثقة حتى يثبت خلاف هذا.

عندما يقوم مستخدم بإجراء معاملة على سلسلة الطبقة الثانية من مجمعات Optimistic، تتم معالجة المعاملة وإضافتها إلى سلسلة الكتل من الطبقة الثانية. ومن ثم يتم نشر مجموعة المعاملات إلى الطبقة الأولى.

إذا تمت إضافة معاملة غير صالحة بطريقة أو بأخرى إلى الطبقة الثانية بسبب جهات ضارة، فلن تكتشف شبكة الطبقة الثانية ذلك وتفترض أن المعاملة كانت صالحة. ومن هنا جاءت كلمة **متفائل** او **Optimistic**.

ولكن بمجرد ترحيل الدفعة إلى السلسلة الرئيسية (الطبقة الأولى)، يمكن لأي شخص تقديم دليل إحتيال للمعاملة. **دليل الاحتيال (fraud proof)** هو دليل مشفر على حقيقة أن معاملة معينة غير صالحة ولا ينبغي تضمينها.

للقيام بذلك، يمكن لأي شخص تشغيل العُقد/الأجهزة المنافسة الخاصة به والتي تتحقق باستمرار من وجود دفعات جديدة يتم نشرها في الطبقة الأولى والتحقق من عدم وجود معاملات احتيالية. إذا قمت بإرسال **دليل احتيال** صالح بنجاح، فستحصل أيضًا على مكافأة للمساعدة في اكتشاف الهجوم الضار.

<img src="https://www.web3arabs.com/courses/layers/optimism-arbitrum.png"/>

#### الإيجابيات

من إيجابيات مجمعات Optimistic من السهل نسبيًا إنشاء هذه الأنظمة، ولدينا العديد من الأمثلة التي تعمل كحلول لمجمعات Optimistic أو المتوفرة في الإنتاج والتي تعمل بشكل جيد ومستقر، وتوفر مزايا توسيع الطبقة الثانية لجميع المستخدمين بشكل مثالي.

#### السلبيات

من سلبيات مجمعات Optimistic يعتمدون على أدلة **الإحتيال للنهائية** (اثناء نقل المعاملات للطبقة الأساسية/الأولى)، ولديهم ما يسمى فترة التحدي. **فترة التحدي** هي مقدار الوقت الذي يمكن أن يأتي خلاله المنافس ويقول إن المعاملة كانت احتيالية. عادةً ما تستمر فترة التحدي هذه من أسبوع إلى أسبوعين. ولهذا السبب، يستغرق إتمام المعاملة في مجمعات Optimistic من أسبوع إلى أسبوعين. بالنسبة للمستخدم هذا يعني أن إخراج أموالك من/إلى الطبقة الأولى يمكن أن يستغرق ما يصل إلى أسبوع لتتم معالجتها وسحب الأموال مرة أخرى إلى Ethereum، فلذلك تُعتبر ليست أفضل تجربة بالنسبة للمٌستخدمين.

## مجمعات ZK

تعني ZK إختصار لـ **المعرفة الصفرية** او **Zero Knowledge**

من ناحية أخرى، تستخدم مجمعات ZK خوارزمية تشفير **Zero Knowledge** للتحقق من المعاملات. عندما يتم ترحيل مجموعة من المعاملات إلى السلسلة الرئيسية (الطبقة الأولى)، يتحقق العقد الذكي تلقائيًا من صحة الدفعة. يمكننا القول بأنها تعمل بعقلية **لا تثق بأحد، وتحقق**.

بعد إجتياز عملية التحقق، تعتبر مجموعة المعاملات نهائية مثل أي معاملة إيثريوم أخرى.

ويتم تحقيق ذلك من خلال إستخدام **الأدلة الصحة (validity proofs)**، والتي يشار إليها عادةً بإسم **أدلة المعرفة الصفرية**. بمجرد إنشاء الدليل، يتم إرساله إلى شبكة Ethereum لجعل الدفعة المجمعة نهائية دون اي مشاكل.

<img src="https://www.web3arabs.com/courses/layers/zk-rollups.png"/>

#### الإيجابيات

من إيجابيات مجمعات ZK النهاية فورية. نظرًا لأنها لا تعتمد على أدلة الإحتيال وبدلاً من ذلك تعتمد على **أدلة الصحة**، بمجرد ترحيل المعاملات إلى Ethereum تُصبح المعاملات نهائية. وهذا يعني أنه يمكن للمستخدمين الانتقال من الطبقة الثانية إلى الطبقة الأولى بسهولة، والشعور بثقة أكبر بشأن أصولهم.

#### السلبيات

من سلبيات مجمعات ZK إن إنشاء مجمعات ZK وخوارزميات ZK بشكل عام أمر معقد للغاية. فلذك لدينا عدد قليل منها. في كثير من الأحيان قد يعني هذا مستوى معين من عدم التوافق مع Ethereum و EVM. على سبيل المثال، لا تستخدم شبكة StarkNet الأجهزة الافتراضية لإيثريوم (EVM) على الإطلاق - وبدلاً من ذلك تعتمد على أجهزة CairoVM التي تأتي مع لغة البرمجة الخاصة بها Cairo بدلاً من استخدام لغة Solidity لبناء العقود الذكية.

كما هو الحال دائمًا، إذا كانت لديك أي أسئلة أو شعرت بالتعثر أو أردت فقط أن تقول مرحبًا، فقم بالإنضمام على <a href="https://t.me/Web3ArabsDAO" target="_blank">Telegram</a> او <a href="https://discord.gg/ykgUvqMc4Q" target="_blank">Discord</a> وسنكون أكثر من سعداء لمساعدتك!
